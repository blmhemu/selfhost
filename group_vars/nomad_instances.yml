---

nomad_version: 1.1.3
nomad_iface: tailscale0
nomad_bootstrap_expect: 1 # Currently when nomad_use_consul is true, this is being set wrongly

# Consul
nomad_use_consul: true
nomad_consul_address: "localhost:8501"
nomad_consul_ssl: true
nomad_consul_ca_file: "{{ consul_tls_dir }}/{{ consul_tls_ca_crt | basename }}"
nomad_consul_cert_file: "{{ consul_tls_dir }}/{{ consul_tls_server_crt | basename }}"
nomad_consul_key_file: "{{ consul_tls_dir }}/{{ consul_tls_server_key | basename }}"

# CNI
nomad_cni_enable: true

# Podman
nomad_podman_enable: true
nomad_podman_version: 0.3.0
nomad_plugins:
  nomad-driver-podman:
    config:
      socket_path: unix://run/user/1000/podman/podman.sock
      volumes:
        enabled: true
      recover_stopped: true

# TLS related
nomad_encrypt_enable: true
nomad_tls_enable: true
nomad_tls_copy_keys: true
nomad_ca_file: "{{ tls_dir_nomad_ca }}/nomad-agent-ca.pem"
nomad_verify_server_hostname: true
nomad_verify_https_client: true
